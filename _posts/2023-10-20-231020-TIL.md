---
layout: single

title: TIL 23-10-20

category: TIL
---

# ë©”ì¼ì´ í•˜ë‚˜ ì™”ë‹¤. ì œëª©ì€ [scseong/movie-app] Bearer Token exposed on GitHub.

## ì˜¤ëŠ˜ í•œ ì¼

- Github ì €ì¥ì†Œì— ì˜¬ë¦° Bearer Token ìˆ¨ê¸°ê¸°

## ë“¤ì–´ê°€ë©°

ë‚´ë°°ìº  3ì£¼ì°¨ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œì¸ ê³¼ì œë¥¼ ë§ˆì¹˜

## ì‚¬ê±´ì˜ ë°œë‹¨..

ë©”ì¼ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. 

```
GitGuardian has detected the following Bearer Token exposed within your GitHub account.
Details

- Secret type: Bearer Token
- Repository: scseong/movie-app
- Pushed date: October 19th 2023, 07:56:59 UTC

Fix This Secret Leak
```

ê·¸ë ‡ë‹¤. ì‹¤ì œ TMDB APIë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ Access token Authì„ js íŒŒì¼ì— ë„£ì–´ì„œ ì‚¬ìš©í•œ ê²ƒì´ í™”ê·¼ì´ì—ˆë‹¤. ì²˜ìŒì—” gitì—ëŠ” ì˜¬ë¦¬ì§€ ì•Šê³  í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ê³„íšì´ì—ˆë‹¤. íŒ¨í‚¤ì§€ ì„¤ì¹˜ì—†ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ í•´ì„œ ì—¬ëŸ¬ ì‹œë„ë¥¼ í–ˆì§€ë§Œ dotenv ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ì•¼ í–ˆë‹¤. "ê°„ë‹¨í•œ í”„ë¡œì íŠ¸ì´ê³  [í•˜ë£¨ ìš”ì²­ í•œê³„](https://developer.themoviedb.org/docs/rate-limiting)ë„ ìˆëŠ”ë° ê·¸ëƒ¥ ì˜¬ë¦¬ì§€" ë¼ëŠ” ìƒê°ìœ¼ë¡œ push í•´ë²„ë ¸ë‹¤.

ë©”ì¼ì„ ë”°ë¼ ê°€ë³´ë‹ˆ Github ê³„ì •ê³¼ GitGuardian ì—°ë™ ê¶Œí•œ ì„¤ì •ì„ í•˜ë€ë‹¤. ëŒ€ì¶© ì´ë¦„ì„ ë³´ë‹ˆ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì¶”ì í•˜ê³  ê´€ë¦¬í•´ì£¼ëŠ”ê°€ë³´ë‹¤ ì‹¶ì—ˆë‹¤. (ì‚¬ìš© ì„¤ì •ë„ ì•ˆí–ˆëŠ”ë° ì–´ë–»ê²Œ ì•Œê³  ë©”ì¼ì„ ë³´ëƒˆì§€)

![](/assets/images/2023-10-20-1.png)

ì—­ì‹œë‚˜ ê·¸ëƒ¥ ì˜¬ë ¸ë˜ Access token Authì´ ë¬¸ì œê°€ ë˜ë‹ˆê¹Œ ë¹¨ë¦¬ ìˆ˜ì •í•˜ë¼ëŠ” ê²ƒ. ê°œë°œí•˜ë©° ë¹¨ê°„ìƒ‰ì„ ë³´ë©´ ê´œíˆ ë¶ˆì•ˆí•´ì§„ë‹¤. ì²˜ìŒì—ëŠ” ëŒ€ìˆ˜ë¡­ì§€ ì•Šê²Œ ìƒê°í–ˆëŠ”ë° GitGuardianì— ëŒ€í•´ ê²€ìƒ‰í•˜ë‹¤ë³´ë‹ˆ 'github í•´í‚¹ ì‚¬ê±´', 'API keyë¥¼ ì˜¬ë ¤ì„œ ê³¼ê¸ˆ ë‹¹í•œ ì‚¬ê±´' ë“±ì„ ë³´ë‹ˆ ìˆ¨ê¸°ê¸°ë¡œ ê²°ì •í–ˆë‹¤. ê°œë°œí•˜ë©° ê²ªì„ ìˆ˜ ìˆëŠ” ìƒí™©ì´ë‹ˆ ì´ë²ˆ ê¸°íšŒì— ì ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.

GitGuardianì—ì„œ ë²„íŠ¼ í•˜ë‚˜ ëˆ„ë¥´ë©´ github ì €ì¥ì†Œì˜ í•´ë‹¹ ë¬¸ìê°€ ì§€ì›Œì§ˆ ê²ƒì„ ê¸°ëŒ€í–ˆì§€ë§Œ ê·¸ëŸ° ì¼ì€ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤. ë°©ë²•ì€ ì•Œë ¤ì¤¬ë‹¤. [Git Clean, Git Remove file from commit - Cheatsheet - GitGuardian Blog](https://blog.gitguardian.com/rewriting-git-history-cheatsheet/)

## Github ì €ì¥ì†Œì—ì„œ ì¤‘ìš”í•œ ë°ì´í„° ì œê±°í•˜ê¸°

ì ë¨¼ì € í•´ì•¼í•  ì¼ì„ ì‚´í´ë³´ì. 

![](https://res.cloudinary.com/da8kiytlc/image/upload/c_scale,r_6,w_500/v1611932656/Cheatsheets/RewritingYourGitHistory-Cheatsheet-Final_weq1l2.png)

â–¶ ìì„¸íˆ ë³´ê¸°: [RewritingYourGitHistory-Cheatsheet-Final_weq1l2.pdf](https://res.cloudinary.com/da8kiytlc/image/upload/v1611932656/Cheatsheets/RewritingYourGitHistory-Cheatsheet-Final_weq1l2.pdf?ref=blog.gitguardian.com)

ë¨¼ì € ë‹¨ê³„ì— ë”°ë¼ ìƒí™©ì— ë§ê²Œ í•´ì•¼í•  ì¼ì„ ëª…í™•í•˜ê²Œ ì„¤ëª…í•˜ê³  ìˆë‹¤.

### STEP 01. "Select a scenario that applies at Step 1"

ì„¸ ê°€ì§€ì˜ ìƒí™©ì´ ìˆë‹¤. secret keyê°€ í¬í•¨ëœ ì»¤ë°‹ì„ í‘¸ì‹œí•˜ì§€ ì•Šì€ ê²½ìš°, í‘¸ì‹œí–ˆì§€ë§Œ í˜¼ì ì‘ì—…í•˜ëŠ” ê²½ìš°ì™€ íŒ€ìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ê²½ìš°. ê·¸ ì¤‘ í˜¼ì ì‘ì—…í•˜ëŠ” ê²½ìš° ìƒí™© Bì— ì†í–ˆë‹¤. 

ê·¸ëŸ°ë° ë‹¹ì‹œ ì •ìƒì  íŒë‹¨ì´ ì•ˆë˜ì–´ ìƒí™© Cë¡œ í–ˆë‹¤. ì–´ì°¨í”¼ ê·¸ ë‹¹ì‹œëŠ” ìµœì‹ í™” ìƒíƒœì˜€ê³  ë‹¨ìˆœ cloneí•´ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“  ê²ƒì´ë¯€ë¡œ ë¬¸ì œê°€ ìˆì§„ ì•Šì•˜ì„ ê²ƒì´ë¼ ìƒê°.

### STEP 02. In all cases mov

ì–´ëŠ ì¼€ì´ìŠ¤ì— ì†í•˜ëƒ ì‚´í´ë´¤ë‹¤. **ë³µì¡í•˜ëŒ€.**

> Which is applicable?
> 
> Secret is not in last commit â€¨therefore **it s complicated**. <u>install git-filter-repo</u>

![](/assets/images/2023-10-20-2.png)

ì´ë¯¸ ì˜¤ë˜ì „ í‘¸ì‹œí•´ì„œ ë…¸ì¶œë˜ê³  ìˆì—ˆë‹¤. git-filter-repo ì„¤ì¹˜í•˜ì.. 

#### git-filter-repo ì„¤ì¹˜í•˜ê¸°

pdfì—ì„œ ì¹œì ˆíˆ ë§í¬ë¥¼ ê±¸ì–´ë†”ì„œ ë”°ë¼ê°€ë´¤ë‹¤. 

> [GitHub - newren/git-filter-repo: Quickly rewrite git repository history (filter-branch replacement)](https://github.com/newren/git-filter-repo)

ì„¤ì¹˜ë°©ë²•ì— INSTALL.mdë¡œ ê°”ë‹¤. í•œêµ­ì–´ë¡œ ë²ˆì—­ì„ ëˆ„ë¥´ê³  ì‚´í´ë³´ë‹ˆ git-filter-repo íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•˜ë€ë‹¤. ë§í¬ë¥¼ ê±¸ì–´ë‘” ì €ì¥ì†Œë¡œ ê°€ì„œ ë¡œì»¬ ì €ì¥ì†Œì— clone í–ˆë‹¤. ì´ê¹Œì§€ëŠ” ìˆ˜ì›”í–ˆë‹¤.

```bash
$ git clone https://github.com/newren/git-filter-repo.git
```

> `git-filter-repo`Â is a single-file python script, which was done to make installation for basic use on many systems trivial: just place that file into your $PATH. - [GitHub - newren/git-filter-repo: Quickly rewrite git repository history (filter-branch replacement)](https://github.com/newren/git-filter-repo)

ê°€ì´ë“œë¥¼ ì‚´í´ë³´ë‹ˆ ë°”ë¡œ ìœ„ì— ì „ì œì¡°ê±´ì´ gitê³¼ pythonì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í–ˆë‹¤. git(bash)ì€ ì´ë¯¸ ì„¤ì¹˜í–ˆì—ˆê³  íŒŒì´ì¬ì€ ì˜¤ë˜ ì „ì— ì¨ì„œ ì„¤ì¹˜ê°€ ë˜ì–´ìˆì—ˆë‹¤. ìœ„ì˜ ëª…ë ¹ì„ ì‹¤í–‰í–ˆë‹¤.
(ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ëŠ” ê¸°ì–µë‚˜ì§€ ì•ŠìŒ.)

ê·¸ë¦¬ê³  ê°€ì´ë“œ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ë³´ë‹ˆ ìì„¸í•œ ì„¤ëª…ì´ ìˆì—ˆë‹¤. filter-repoë¥¼ ë””ë ‰í† ë¦¬ì— ì„¤ì¹˜í•˜ë¼ê³  í–ˆë‹¤. `$ git --exec-path`  ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë‹ˆ ì£¼ì†Œê°€ í•˜ë‚˜ ë‚˜ì™”ë‹¤. git ì‹¤í–‰Â ê²½ë¡œë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜ ì„¤ì •í•˜ëŠ” í´ë” ì£¼ì†Œë¥¼ ì•Œë ¤ì£¼ëŠ” ëª…ë ¹ì–´. ì•„ê¹Œ ë‹¤ìš´ ë°›ì€ `git-filter-repo` íŒŒì¼ì„ ë°©ê¸ˆ ì£¼ì†Œë¡œ ë¶™ì—¬ ë„£ì—ˆë‹¤. 

ê·¸ëŸ° ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë€ë‹¤. ì‹¤í–‰í•˜ë‹ˆ ë°ë°í•˜ê²Œ 'Python' ì´ë¼ëŠ” ì¶œë ¥ë§Œ ë‚˜ì™”ë‹¤.

```py
$ python3 git-filter-repo --analyze
```

#### ë‹¤ìŒ ë‹¨ê³„..

ì•„ì§ ë‚¨ì•˜ë‹¤. "Is the secret a portion of a larger file or a file that needs to be removed?"

ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì‚­ì œí•  ìˆ˜ëŠ” ì—†ê³  í•´ë‹¹ ë¼ì¸ 1ì¤„ë§Œ ì§€ì›Œì•¼ í•œë‹¤. ë‹¤ìŒ í–‰ë™ìœ¼ë¡œ ë„˜ì–´ê°”ë‹¤. 

> Portion of a file: Create file Â«replacement.txtÂ» Use format: ORIGINAL==>REPLACEMENT

replacement.txt íŒŒì¼ì„ ë§Œë“¤ì—ˆë‹¤. íŒŒì¼ì„ ëª…ì‹œëœ í…ìŠ¤íŠ¸ë¥¼ ì–´ë–»ê²Œ ë°”ê¿€ ê²ƒì¸ì§€ ì •ì˜í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 'abcdef'ë¥¼ ì°¾ì•„ ì˜¤ë¥¸ìª½ 123ìœ¼ë¡œ ë³€ê²½í•œë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë¡œ ë°”ê¾¸ì§€ ì•Šìœ¼ë ¤ë©´ ë¹ˆ ì¹¸ìœ¼ë¡œ ë‘”ë‹¤. ë¹„ì›Œë‘ë©´ `***REMOVED***'`ê°€ ëœë‹¤.

```markdown
abcdef==>123
abcdef
```

ê·¸ë˜ì„œ replacement.txt íŒŒì¼ì— ê¹ƒí—ˆë¸Œì— ì˜¬ë¦° Access Token ë¬¸ìì—´ì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê³  ì €ì¥í–ˆë‹¤. replacement.txt íŒŒì¼ì€ í”„ë¡œì íŠ¸ ìƒìœ„ ë””ë ‰í„°ë¦¬ì—Â ìˆì–´ì•¼ í•œë‹¤.

#### ì‹¤í–‰ë§Œ ë‚¨ì•˜ë‹¤

`$ git filter-repo --replace-text ../replace.txt --force` ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì—ì„œ git bashë¥¼ ì—´ì–´ ì‹¤í–‰í–ˆë‹¤. 

ê²°ê³¼ëŠ” **"git: 'filter-repo' is not a git command."**. ìˆœì¡°ë¡­ê²Œ ë ë¦¬ê°€ ì—†ë‹¤.

#### ë‹¤ì‹œ git-filter-repo ì„¤ì¹˜í•˜ê¸°

ì—ëŸ¬ë¥¼ êµ¬ê¸€ë§í•˜ë©´ì„œ ë‹¤ì‹œ ì´ìœ ë¥¼ ì°¾ì•„ë´¤ë‹¤. ì´ ë¬¸ì œë§Œ 1ì‹œê°„ì€ ê±¸ë¦° ë“¯. 

(ì§€ê¸ˆ ë³´ë‹ˆê¹Œ ì•Œë ¤ì¤€ëŒ€ë¡œ í–ˆìœ¼ë©´ ë˜ëŠ”ë° ì™œ ê·¸ë• ëˆˆì— ë“¤ì–´ì˜¤ì§€ ì•Šì•˜ì„ê¹Œ.)

ë¬´ìˆ˜í•œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë”°ë¼ í•´ë³´ë©° ì‹¤í–‰í•œ ê²ƒ ì¤‘ í•˜ë‚˜ - [How do you install git-filter-repo?](https://superuser.com/questions/1563034/how-do-you-install-git-filter-repo)

```bash
$ python3 -m pip install --user git-filter-repo`
```

ê·¸ë¬ë”ë‹ˆ warningì´ ë–´ë‹¤. ë²„ì „ ì–´ì©Œêµ¬ì €ì©Œêµ¬.. ì—…ë°ì´íŠ¸ í–ˆë‹¤. 

`pip install --upgrade pip`

`pip list` í•´ë³´ë‹ˆ git-filter-repoê°€ ìˆì—ˆë‹¤.

![](/assets/images/2023-10-20-3.png)

ì„¤ì¹˜ëœ ê²ƒì„ ë³´ê³  ë‹¤ì‹œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í–ˆë‹¤. 

`$ git filter-repo --replace-text ../replacement.txt`

ë¯¸ì ì§€ê·¼í•˜ê²Œ ë˜ 'Python' í•œ ë‹¨ì–´ë§Œ ì¶œë ¥ì´ ë‚˜ì™”ë‹¤. ë³´í†µ git ëª…ë ¹ì„ ì¹˜ë©´ ì´¤ë¥´ë¥´ë¥µ ë‚˜ì˜¤ë©´ì„œ ì§„í–‰ì´ ë˜ëŠ”ë° ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤. `git filter-repo -h` ì„ ì…ë ¥í•˜ë©´ help ë¬¸ì´ ë‚˜ì˜¨ë‹¤ëŠ”ë° ê·¸ê²ƒë„ ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤. í›„.. ë˜ ì°¾ì•„ë´¤ë‹¤.

- [git filter-repo ëª…ë ¹ì€ Windowsì—ì„œ ì•„ë¬´ê²ƒë„ ì¶œë ¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. - stackoverflow](https://stackoverflow.com/questions/69355161/git-filter-repo-commands-output-nothing-on-windows)

- gif-filter-repo/INSTALL.md [Notes for Windows Users](https://github.com/newren/git-filter-repo/blob/main/INSTALL.md#notes-for-windows-users)

> **Modifying PATH, making the script executable**: For some reason lots of Windows users have a hard time modifying their PATH and/or making scripts executable. You can skip that step by just usingÂ `python3 git-filter-repo`Â instead ofÂ `git filter-repo`Â in your commands.

python3 git-filter-repoë„ í•´ë³´ê³   git filter-repoë„ ë‹¤í•´ë´¤ëŠ”ë° ì‹¤íŒ¨. ê·¸ëŸ¬ë‹¤ê°€ [ë¹„ê³µê°œë¡œ ì‘ì—…í•˜ë˜ ë ˆí¬ ê³µê°œë¡œ ì „í™˜í•˜ê¸° ìœ„í•´ ìŠ¤í¬ë¦¿ íŒŒì¼ ì‚­ì œí•˜ê¸° - ì¹œì„±ì˜ ë¸”ë¡œê·¸](https://chinsun9.github.io/2021/04/13/%EB%B9%84%EA%B3%B5%EA%B0%9C%EB%A1%9C-%EC%9E%91%EC%97%85%ED%95%98%EB%8D%98-%EB%A0%88%ED%8F%AC-%EA%B3%B5%EA%B0%9C%EB%A1%9C-%EC%A0%84%ED%99%98%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%B4-%EC%8A%A4%ED%81%AC%EB%A6%BF-%ED%8C%8C%EC%9D%BC-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0/) [scoop](https://scoop.sh/)ì„ í†µí•´ ì„¤ì¹˜í•˜ë©´ ë¬¸ì œì—†ë‹¤ê³  í•´ì„œ scoopì„ ì„¤ì¹˜í–ˆë‹¤. powershellë¡œ ì‹¤í–‰. (ì´ì „ì— git-filter-repo ì‚­ì œí–ˆë‹¤. pip uninstall git-filter-repo )

```bash
> Set-ExecutionPolicy RemoteSigned -Scope CurrentUser # Optional: Needed to run a remote script the first time
> irm get.scoop.sh | iex
```

```
ğŸš¨ Error
Running the installer as administrator is disabled by default, 
see https://github.com/ScoopInstaller/Install#for-admin for details.
```

ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ ë˜ êµ¬ê¸€ë§ - [scoop ì„¤ì¹˜](https://funny-dev.tistory.com/15) -> í•´ê²°

```
iex "& {$(irm get.scoop.sh)} -RunAsAdmin"
```

ì´í›„ filter-repo ì„¤ì¹˜

```bash
scoop install git-filter-repo
```

`$ git filter-repo --replace-text ../replacement.txt`

ë˜ ì•„ë¬´ ì¼ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ë‹¤. ë‹¤ì‹œ êµ¬ê¸€ë§í•˜ëŠ”ë° ê·¸ì œì„œì•¼ ì•„ê¹Œ ë´¤ë˜ [stackoverflow ê¸€]([python - `git filter-repo` commands output nothing on Windows - Stack Overflow](https://stackoverflow.com/questions/69355161/git-filter-repo-commands-output-nothing-on-windows))ì—ì„œ 

> ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬Â `git --exec-path`Git exeê°€ ì„¤ì¹˜ëœ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.Â ê·¸ëŸ° ë‹¤ìŒ í•´ë‹¹ ë””ë ‰í† ë¦¬ì—ì„œÂ `git-filter-repo`.Â ë‚´ ê²ƒì€ ëŒ€ëµ 160KB í¬ê¸°ì˜ Python ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.Â ê±°ê¸°ì— ìˆìœ¼ë©´ í•´ë‹¹ íŒŒì¼ì„ ì—´ê³  ì²« ë²ˆì§¸ ì¤„ì„ í™•ì¸í•˜ì‹­ì‹œì˜¤.Â "python3"ì´ ë‚˜ì—´ë˜ì–´ ìˆìœ¼ë©´ "python"(3 ì œì™¸)ìœ¼ë¡œ ë³€ê²½í•´ ë³´ì„¸ìš”.

ì²˜ìŒ ë‹¤ìš´ë°›ì•˜ë˜ git-filter-repo íŒŒì¼ì„ ì—´ì–´ `ctrl + f`í•´ì„œ python3ì„ ëª¨ë‘ pythonìœ¼ë¡œ ë³€ê²½í–ˆë‹¤.

`$ git filter-repo --replace-text ../replacement.txt`

![](/assets/images/2023-10-20-4.png)

ë“œë””ì–´.... 

### STEP 03. Move to Step 3 that relates to the original scenario

[Removing Sensitive Information from Git with git-filter-repo](https://jflower.co.uk/removing-sensitive-information-from-git-with-git-filter-repo/)

ì´í›„ì˜ ê³¼ì •ì€ ìˆ˜ì›”í–ˆë‹¤!.

```bash
$ git remote add origin https://github.com/scseong/movie-app.git
$ git push -u origin develop â€“force
```

cloneí•œ remote ì €ì¥ì†Œì— ì—°ê²°í•´ì£¼ê³  í‘¸ì‹œí–ˆë‹¤!

![](/assets/images/2023-10-20-5.png)

## Summary

0. python, git bash ì„¤ì¹˜ (git bash ì´ìš©)

1. [GitHub - newren/git-filter-repo](https://github.com/newren/git-filter-repo)ì—ì„œ 'git-filter-repo' íŒŒì¼ ë‹¤ìš´ë¡œë“œ(í™•ì¥ì ì—†ìŒ)

2. `$ git --exec-path` ëª…ë ¹ì–´ ì‹¤í–‰í•œ ê²°ê³¼ í´ë”ì— git-filter-repo íŒŒì¼ ë„£ê¸°

3.  `python3 -m pip install --user git-filter-repo`: git-filter-repo ì„¤ì¹˜

4. í”„ë¡œì íŠ¸ í´ë”ì˜ ìƒìœ„ í´ë”ì— `replacement.txt` ìƒì„±. ì§€ìš°ê³  ì‹¶ì€ ë¬¸ìì—´ ì €ì¥.

5. í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì—ì„œ `$ git filter-repo --replace-text ../replacement.txt`` ì‹¤í–‰

6. ì‹¤íŒ¨í•˜ë©´ git-filter-repo íŒŒì¼ python3ì„ pythonìœ¼ë¡œ ìˆ˜ì •

7. 5ë¥¼ ë‹¤ì‹œ ì‹¤í–‰

8. github ì €ì¥ì†Œì— push. `git push origin ..`

## ëŠë‚€ì 

ì‚¬ì‹¤ ê¸€ì€ ìˆœì„œëŒ€ë¡œ ì˜ í•´ê²°í•œ ê²ƒ ê°™ì§€ë§Œ ì™”ë‹¤ê°”ë‹¤ ëª‡ ì‹­ê°œì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³´ê³  ìš°ì—¬ê³¡ì ˆì„ ê²ªìœ¼ë©° í•´ê²°í•œ ìˆœì„œë¡œ ì‘ì„±í–ˆë‹¤. í•˜ë£¨ë¥¼ ê¼¬ë°• ì¨ë²„ë ¸ë‹¤..

githubì— secret keyë¥¼ ì˜¬ë¦° ê²°ê³¼ëŠ” ë”ì°í–ˆë‹¤. í•˜ì§€ë§Œ ë•ë¶„ì— github ì €ì¥ì†Œì— ì˜¬ë ¤ ì»¤ë°‹ì´ ìŒ“ì˜€ì„ ë•Œ ì§€ë‚œ ì»¤ë°‹ì—ì„œì˜ ë¬¸ìì—´ì„ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•˜ë‹¤.

ê·¸ë¦¬ê³  ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë³¼ ë–„ëŠ” ê¼­ ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ê³  ìì„¸íˆ ì‚´í´ë´ì•¼í•œë‹¤ëŠ” êµí›ˆë„ ì–»ì—ˆë‹¤. ê°œë°œë³´ë‹¤ëŠ” ì‚½ì§ˆì„ í•´ì„œ í›¨ì”¬ í”¼ê³¤í•´ì§„ í•˜ë£¨ê°€ ë˜ë²„ë ¸ë‹¤!

ê·¸ë¦¬ê³  ê¹ƒ ê·¸ë˜í”„ê°€ ê¼¬ì—¬ë²„ë ¸ë‹¤...

![](/assets/images/2023-10-20-6.png)

### Reference

- [#3 - [Git_Filter_Repo] - How to use Git-Filter Repo to remove secrets, tokens from the repository and history? - Theories by Vicky!](https://theoriesbyvicky.in/gitguardian/how-to-use-git-filter-repo-to-remove-secrets-tokens-keys-files-from-the-repository-and-rewrite-the-history/)